@model Hotel_Manager.Models.Reservation

@{
    ViewData["Title"] = "Reservation Details";
}

<h1>Reservation Details</h1>

<div class="row">
    <div class="col-md-8">
        <dl class="row">
            <dt class="col-sm-3">Guest</dt>
            <dd class="col-sm-9">@Model.User?.FirstName @Model.User?.LastName (@Model.User?.Email)</dd>

            <dt class="col-sm-3">Check-In</dt>
            <dd class="col-sm-9">@Model.CheckInDate.ToShortDateString()</dd>

            <dt class="col-sm-3">Check-Out</dt>
            <dd class="col-sm-9">@Model.CheckOutDate.ToShortDateString()</dd>

            <dt class="col-sm-3">Total Price</dt>
            <dd class="col-sm-9">@Model.TotalPrice.ToString("C")</dd>

            <dt class="col-sm-3">Status</dt>
            <dd class="col-sm-9">
                @{
                    var statusClass = Model.Status switch
                    {
                        "Upcoming" => "bg-info",
                        "In Progress" => "bg-warning",
                        "Completed" => "bg-success",
                        _ => "bg-secondary"
                    };
                }
                <span class="badge @statusClass">@Model.Status</span>
            </dd>

            <dt class="col-sm-3">Room(s)</dt>
            <dd class="col-sm-9">
                @foreach (var rr in Model.ReservationRooms)
                {
                    <div>@rr.Room?.RoomNumber - @rr.Room?.RoomType?.Name (@rr.Room?.RoomType?.PricePerNight.ToString("C")/night)</div>
                }
            </dd>

            <dt class="col-sm-3">Services</dt>
            <dd class="col-sm-9">
                @if (Model.ReservationServices.Any())
                {
                    foreach (var rs in Model.ReservationServices)
                    {
                        <span class="badge bg-secondary me-1">@rs.HotelService?.Name (@rs.HotelService?.Price.ToString("C"))</span>
                    }
                }
                else
                {
                    <span class="text-muted">No additional services</span>
                }
            </dd>
        </dl>
    </div>
</div>

<div>
    <a asp-action="Index" class="btn btn-secondary">Back to List</a>
</div>